cmake_minimum_required(VERSION 3.1)
# CMake C++11 Options
set(CMAKE_CXX_STANDARD "11")
set(CMAKE_CXX_STANDARD_REQUIRED "ON")
set(CMAKE_CXX_EXTENSIONS "OFF")

# CDIT Runtime Paths
set(RE_PATH "$ENV{RE_PATH}")
set(CMAKE_MODULE_PATH "${RE_PATH}/cmake_modules")

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/lib")
if(MSVC)
	set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG "${CMAKE_LIBRARY_OUTPUT_DIRECTORY}")
	set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE "${CMAKE_LIBRARY_OUTPUT_DIRECTORY}")
endif(MSVC)

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/lib")
if(MSVC)
	set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG "${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}")
	set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE "${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}")
endif(MSVC)

set(REGEN_PATH ${CMAKE_CURRENT_SOURCE_DIR}/..)
find_package(REGEN REQUIRED)

file(GLOB GRAPHML_FILES "*.graphml")

# Run the regen compiler over the graphml files
REGEN_GENERATE_CPP(GENERATED_DIRS ${GRAPHML_FILES})

FOREACH(GENERATED_DIR ${GENERATED_DIRS})
	add_subdirectory("${GENERATED_DIR}")
ENDFOREACH(GENERATED_DIR)